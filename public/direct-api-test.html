<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Direct API Test</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
    button { padding: 10px 15px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
    pre { background: #f5f5f5; padding: 15px; border-radius: 4px; overflow-x: auto; }
    .result { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Direct API Test</h1>
  <p>This page tests direct API calls to verify network visibility.</p>
  <p><strong>Important:</strong> You need to have a CORS browser extension enabled for this to work.</p>
  
  <button onclick='testDirectApi()'>Test Direct API Call</button>
  <div class='result'>
    <h3>Result:</h3>
    <pre id='result'>Click the button to see results...</pre>
  </div>

  <script>
    function testDirectApi() {
      const resultElement = document.getElementById('result');
      resultElement.textContent = 'Making request...';
      
      const url = 'https://drap-sandbox.digitnine.com/auth/realms/cdp/protocol/openid-connect/token';
      const formData = new URLSearchParams();
      formData.append('username', 'testagentae');
      formData.append('password', 'Admin@123');
      formData.append('grant_type', 'password');
      formData.append('client_id', 'cdp_app');
      formData.append('client_secret', 'mSh18BPiMZeQqFfOvWhgv8wzvnNVbj3Y');

      fetch(url, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: formData
      })
      .then(response => {
        if (!response.ok) {
          throw new Error(HTTP error! Status: );
        }
        return response.json();
      })
      .then(data => {
        resultElement.textContent = JSON.stringify(data, null, 2);
      })
      .catch(error => {
        resultElement.textContent = Error: ;
      });
    }
  </script>
</body>
</html>
